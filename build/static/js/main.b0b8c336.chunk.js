(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(11),o=n.n(u),i=n(12),c=n(2),l=n(3),s=n.n(l),m="/api/persons",d=function(){return s.a.get(m)},f=function(e){return s.a.post(m,e)},p=function(e,t){return s.a.put("".concat(m,"/").concat(e),t)},b=function(e){return s.a.delete("".concat(m,"/").concat(e))},g=function(e){var t=e.persons,n=e.setPersons,a=e.nameFilter,u=(e.setMessage,e.displayMessage);return t.filter(function(e){return e.name.toLowerCase().includes(a)}).map(function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Haluatko poistaa henkil\xf6n ".concat(e.name,"?"))&&b(e.id).then(function(a){n(t.filter(function(t){return t.id!==e.id})),u("Henkil\xf6 ".concat(e.name," poistettu."),3e3,!0)}).catch(function(a){n(t.filter(function(t){return t.id!==e.id})),u("Henkil\xf6 ".concat(e.name," oli jo poistettu."),3e3,!1)})}(e)}},"Poista"))})},v=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,u=e.setNewNumber,o=e.persons,c=e.setPersons,l=e.displayMessage;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){if(""!==t){e.preventDefault();var r={name:t,number:a};if(o.some(function(e){return e.name===t&&e.number===a}))l("".concat(t," on jo luettelossa."),3e3,!1);else if(o.some(function(e){return e.name===t})){if(window.confirm("".concat(t," on jo luettelossa. Korvataanko vanha numero uudella?"))){var s=o.find(function(e){return e.name===t}),m=Object(i.a)({},s,{number:a});p(s.id,m).then(function(e){c(o.map(function(e){return e.id===s.id?m:e})),n(""),u(""),l("Henkil\xf6n ".concat(s.name," numero muutettu."),3e3,!0)}).catch(function(e){c(o.filter(function(e){return e.id!==s.id})),l("Henkil\xf6 ".concat(s.name," oli jo poistettu."),3e3,!1)})}}else f(r).then(function(e){c(o.concat(e.data)),n(""),u(""),l("Henkil\xf6 ".concat(e.data.name," lis\xe4tty."),3e3,!0)}).catch(function(e){l(e.response.data.error,5e3,!1)})}}},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:a,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},E=function(e){var t=e.nameFilter,n=e.setNameFilter;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},h=function(e){var t=e.message,n=e.success;return null===t?null:n?r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t):r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t)},j=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),l=i[0],s=i[1],m=Object(a.useState)(""),f=Object(c.a)(m,2),p=f[0],b=f[1],j=Object(a.useState)(""),w=Object(c.a)(j,2),k=w[0],y=w[1],N=Object(a.useState)(null),O=Object(c.a)(N,2),S=O[0],x=O[1],H=Object(a.useState)(!0),F=Object(c.a)(H,2),M=F[0],P=F[1],C=function(e,t,n){P(n),x(e,M),setTimeout(function(){x(null)},t)};return Object(a.useEffect)(function(){d().then(function(e){return u(e.data)})},[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Puhelinluettelo"),r.a.createElement(h,{message:S,success:M}),r.a.createElement("h2",null,"Hakurajaus"),r.a.createElement(E,{nameFilter:k,setNameFilter:y}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement(v,{newName:l,setNewName:s,newNumber:p,setNewNumber:b,persons:n,setPersons:u,displayMessage:C}),r.a.createElement("h2",null,"Numerot"),r.a.createElement(g,{persons:n,setPersons:u,nameFilter:k,setMessage:x,displayMessage:C}))};o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.b0b8c336.chunk.js.map